<!DOCTYPE html>
<html>
<head>
<style>
body {
    background-color: lightgray;
    font-family: Arial;
}

.container {
    gap: 20px;
    justify-content: center;
    max-width: 150px;
    margin: auto;
}

.container a {
    display: block;
    padding: 12px 24px;
    font-size: 18px;
    color: white;
    background-color: black;
    text-align: center;
    text-decoration: none;
    border-radius: 8px;
    transition: background-color 0.3s ease;
}

.container a:hover {
    background-color: RoyalBlue;
}

.form-container {
    display: inline-block;
    text-align: left;
    margin: 20px auto;
}

.form-row {
    margin: 8px 0;
    display: flex;
    justify-content: space-between;
    width: 340px; /* keeps everything aligned */
}

.form-row label {
    flex: 1;
    font-weight: bold;
}

.form-row input {
    flex: 1;
    padding: 6px;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid black;
}

.form-buttons {
    display: flex;
    justify-content: space-between;
    width: 340px;
    margin-top: 10px;
}

button {
    margin: 5px;
    padding: 10px 20px;
    font-size: 16px;
    color: white;
    background-color: black;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

button:hover {
    background-color: RoyalBlue;
}

table {
    margin-top: 20px;
    border-collapse: collapse;
    width: 90%;
    background-color: white;
}

table, th, td {
    border: 1px solid black;
    text-align: center;
    padding: 8px;
}

th {
    background-color: dodgerblue;
    color: white;
}

tfoot td {
    font-weight: bold;
    background-color: lightyellow;
}
</style>
</head>

<body>
    <center> 
        <h2 style="font-size: 45px; color: dodgerblue;"><b>Payroll</b></h2>

        <div class="form-container">
            <div class="form-row">
                <label for="emp_name">Employee Name:</label>
                <input type="text" id="emp_name">
            </div>
            <div class="form-row">
                <label for="days_worked">Days Worked:</label>
                <input type="number" id="days_worked">
            </div>
            <div class="form-row">
                <label for="daily_rate">Daily Rate:</label>
                <input type="number" id="daily_rate">
            </div>
            <div class="form-row">
                <label for="deduct_amount">Deduction:</label>
                <input type="number" id="deduct_amount">
            </div>
        </div>

        <div class="form-buttons">
            <button onclick="addEmployee()">Add Employee</button>
            <button onclick="deleteEmployee()">Delete Employee</button>
        </div>

        <table>
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Name</th>
                    <th>Days Worked</th>
                    <th>Daily Rate</th>
                    <th>Gross Pay</th>
                    <th>Deductions</th>
                    <th>Net Pay</th>
                </tr>
            </thead>
            <tbody id="payroll-body">
                <tr>
                    <td>1</td>
                    <td>John Van Neumann</td>
                    <td>3</td>
                    <td>500.00</td>
                    <td>1500.00</td>
                    <td>300.00</td>
                    <td>1200.00</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Charles W. Babbage</td>
                    <td>4</td>
                    <td>500.00</td>
                    <td>2000.00</td>
                    <td>500.00</td>
                    <td>1500.00</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4">Totals</td>
                    <td id="gross-total">0.00</td>
                    <td id="deduct-total">0.00</td>
                    <td id="net-total">0.00</td>
                </tr>
            </tfoot>
        </table>

        <br><br>
        <div class="container">
            <a href="index.html" onclick="playSound(event, 'index.html')">Home Page</a>
        </div>
    </center>

    <audio id="buttonSound" src="buttonsound.ogg"></audio>

    <script>
        function playSound(event, url) {
            event.preventDefault();
            const sound = document.getElementById("buttonSound");
            sound.currentTime = 0;
            sound.play();
            setTimeout(() => {
                window.location.href = url;
            }, 400);
        }

        function getNumberValue(id) {
            const value = parseFloat(document.getElementById(id).value);
            return isNaN(value) ? 0 : value;
        }

        function updateTotals() {
            const tableBody = document.getElementById('payroll-body');
            const rows = tableBody.getElementsByTagName('tr');

            let totalGross = 0;
            let totalDeductions = 0;
            let totalNet = 0;

            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName('td');
                
                const gross = parseFloat(cells[4].textContent) || 0;
                const deduct = parseFloat(cells[5].textContent) || 0;
                const net = parseFloat(cells[6].textContent) || 0;
                cells[0].textContent = i + 1;

                totalGross += gross;
                totalDeductions += deduct;
                totalNet += net;
            }

            document.getElementById('gross-total').textContent = totalGross.toFixed(2);
            document.getElementById('deduct-total').textContent = totalDeductions.toFixed(2);
            document.getElementById('net-total').textContent = totalNet.toFixed(2);
        }

        function addEmployee() {
            const name = document.getElementById('emp_name').value;
            const daysWorked = getNumberValue('days_worked');
            const dailyRate = getNumberValue('daily_rate');
            const deduction = getNumberValue('deduct_amount');
            
            if (name === "" || daysWorked === 0 || dailyRate === 0 || document.getElementById('deduct_amount').value === "") {
                alert("Please fill in all fields.");
                return;
            }

            const grossPay = daysWorked * dailyRate;
            const netPay = grossPay - deduction;
            const tableBody = document.getElementById('payroll-body');
            const nextEmpNo = tableBody.getElementsByTagName('tr').length + 1;
            const newRow = tableBody.insertRow();
            const values = [
                nextEmpNo,
                name,
                daysWorked.toFixed(0),
                dailyRate.toFixed(2),
                grossPay.toFixed(2),
                deduction.toFixed(2),
                netPay.toFixed(2)
            ];

            for (let i = 0; i < values.length; i++) {
                const newCell = newRow.insertCell(i);
                newCell.textContent = values[i];
                if (i !== 1) { 
                    newCell.classList.add('ndata');
                }
            }

            updateTotals();
            clearInputs();
        }

        function deleteEmployee() {
            const input = prompt("Enter employee No. to delete:");
            if (input === null || input.trim() === "") {
                // Cancel or empty input â†’ exit silently
                return;
            }

            const line = parseInt(input, 10) - 1;
            const tbody = document.getElementById('payroll-body');
            if (!isNaN(line) && line >= 0 && line < tbody.rows.length) {
                tbody.deleteRow(line);
                updateTotals();
            } else {
                alert("Employee does not exist");
            }   
        }
        
        function clearInputs() {
            document.getElementById("emp_name").value = "";
            document.getElementById("days_worked").value = "";
            document.getElementById("daily_rate").value = "";
            document.getElementById("deduct_amount").value = "";
        }

        // Run totals once on page load to include default employees
        window.onload = updateTotals;
    </script>
</body>

</html>


